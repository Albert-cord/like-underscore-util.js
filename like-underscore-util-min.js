!function(){var root="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},_=function(n){return n instanceof _?n:this instanceof _?void(this._wrapped=n):new _(n)};"undefined"==typeof exports||exports.nodeType?root._=_:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=_),exports._=_),_.version="1.0.0";var defaultLikeUnderscoreUtil=root._,ArrayProto=Array.prototype,push=ArrayProto.push,slice=ArrayProto.slice,ObjectProto=Object.prototype,toString=ObjectProto.toString,hasOwnProperty=ObjectProto.hasOwnProperty,nativeIsArray=Array.isArray,MAX_ARRAY_INDEX=Math.pow(2,53)-1,builtinIteratee=_.iteratee=function(n,t){return cb(n,t,1/0)},noop=function(){};_.noop=noop;var log=console.log.bind(),logOnce=!1,cb=function(n,t,e){return _.iteratee!=builtinIteratee?_.iteratee(n,t):null==n?_.identity:_.isFunction(n)?optimizeCb(n,t,e):_.isObject(n)&&!_.isArray(n)?_.matcher(n):_.property(n)},optimizeCb=function(i,o,n){if(null==o)return i;switch(null==n?3:n){case 1:return function(n){return i.call(o,n)};case 3:return function(n,t,e){return i.call(o,n,t,e)};case 4:return function(n,t,e,r){return i.call(o,n,t,e,r)}}return function(){return i.apply(o,arguments)}},shallowProperty=function(t){return function(n){if(null!=t&&null!=n)return n&&n[t]}},getLength=shallowProperty("length"),restArguments=function(e,r){var i=e&&e.length||0;return function(){var n;if(_.isNumber(r))return(n=[])[r]=[].slice.call(arguments),e.apply(this,n);if(arguments.length<i&&1!=i)
//     args[pos] = [args[pos]];
return(n=[].slice.call(arguments)).length<i&&(n[i-1]=[]),e.apply(this,n);n=Array(i);for(var t=0;t<Math.max(0,i-1);t++)n[t]=arguments[t];return n[t]=[].slice.call(arguments,i-1),e.apply(this,n)}},wrapperByArgsNumber=_.wrapperByArgsNumber=function(e,t){return function(n){return arguments.length<=1?e.call(null,n):!0===t?_.every(arguments,function(n,t){return e.call(null,n)}):_.some(arguments,function(n,t){return e.call(null,n)})}};_.isArrayLike=function(n){if("object"==typeof n&&null!==n){var t=shallowProperty("length")(n);if("number"==typeof t&&0<=t&&t<=MAX_ARRAY_INDEX)return!0}return!1},_.identity=function(n){return n},_.property=function(n){return _.isArrayLike(n)?_.deepGet(n):shallowProperty(n)},_.deepGet=function(r){return function(n){var t=r.length;if(0!==t){for(var e=0;e<t&&(n=n&&n[r[e]]);e++);return e>=Math.max(t-1,0)?n:null==n?void 0:n}}},_.propertyOf=function(r){return _.isObject(r)?function(n){return _.isArrayLike(n)?(_.each(n,function(n,t,e){r=r&&r[n]}),null==r?null:r):r[n]}:noop},_.matcher=_.matches=function(t){return t=_.extendOwn({},t),function(n){return _.isMatch(n,t)}},_.isMatch=function(n,t){if(null==n&&(_.isRealObject(t)&&_.isEmpty(t)||null==t))return!0;if(!_.isObject(n)&&!_.isArrayLike(n))return!1;for(var e in t)if(has(t,e)&&(!(e in n)||has(n,e)&&n[e]!==t[e]))return!1;
//     if(!has(obj, prop) && obj[prop] !== attrs[prop])
//         return false;
return!0};var chainsFunc=function(n,t){return n._chain?_(t).chain():t};_.mixin=function(i){return _.each(_.functions(i),function(n,t,e){var r=_[n]=i[n];_.prototype[n]=function(){var n=[this._wrapped];return push.apply(n,arguments),chainsFunc(this,r.apply(_,n))}}),_},_.chain=function(n){var t=_(n);return t._chain=!0,t}
//     return this._wrapped;
,_.prototype.valueOf=_.prototype.toJSON=_.prototype.value=function(){return this._wrapped},_.prototype.toString=function(){return String(this._wrapped)},_.each=_.forEach=function(n,t,e){var r=optimizeCb(t,e);if(null==n)return null;var i,o=0;if(_.isArrayLike(n))for(i=n.length,o=0;o<i;o++)r(n[o],o,n);else{var u=_.keys(n);for(i=u.length,o=0;o<i;o++)r(n[u[o]],u[o],n)}return n},_.map=_.collect=function(n,t,e){t=cb(t,e);var r,i,o=[];if(_.isArrayLike(n))for(i=n.length,r=0;r<i;r++)o.push(t(n[r],r,n));else{var u=_.keys(n);for(i=u.length,r=0;r<i;r++)o.push(t(n[u[r]],u[r],n))}return o},_.every=_.all=function(n,t,e){var r,i,o;if(t=cb(t,e),_.isArrayLike(n)){for(o=n.length,r=0;r<o;r++)if(!t(n[r],r,n))return!1}else for(o=(i=_.keys(n)).length,r=0;r<o;r++)if(!t(n[i[r]],i[r],n))return!1;return!0},_.some=_.any=function(n,t,e){var r,i,o;if(t=cb(t,e),_.isArrayLike(n)){for(o=n.length,r=0;r<o;r++)if(t(n[r],r,n))return!0}else for(o=(i=_.keys(n)).length,r=0;r<o;r++)if(t(n[i[r]],i[r],n))return!0;return!1};var createReduceFn=function(a){return function(n,t,e,r){var i,o=_.isArrayLike(n)?n.length:_.keys(n);if((null==n||0===n.length||o&&0===o.length)&&null!=e)return e;if(n&&(1===n.length||1===(o&&o.length)))return _.isArrayLike(n)?n[0]:n[o[0]];t=cb(t,r,4),_.isArrayLike(n)?(i=0<a?0:n.length-1,null==e&&(e=n[i],i+=a)):(i=0<a?0:o.length-1,null==e&&(e=n[o[i]],i+=a));for(var u=_.isArrayLike(n)?o:o.length;0<=i&&i<u;i+=a)e=_.isArrayLike(n)?t(e,n[i],i,n):t(e,n[o[i]],o[i],n);return e}};_.reduce=_.inject=_.foldl=createReduceFn(1),_.reduceRight=_.foldr=createReduceFn(-1);
//     var ret;
//     if(!_.isArrayLike(arr)) return [];
//     if(getLength(arr) === 0) return [];
//     if(getLength(arr) === 1) return _.isArray(arr[0]) ? _.flatten(arr[0]) : arr;
//     ret = _.reduce(arr, function(now, next) {
//         // log(now, next)
//         if(isShallow) {
//             return _.isArray(now) ? now.concat(next) : [now].concat(next);;
//         } else {
//             return _.isArray(now) ? _.flatten(now).concat(_.isArray(next) ? _.flatten(next) : next)
//                 : [now].concat(_.isArray(next) ? _.flatten(next) : next);
//         }
//     });
//     return ret;
var flatten=function(n,t,e,r){if(r=r||[],!_.isArrayLike(n)||0===n.length)return[];for(var i,o=r.length,u=0,a=n.length;u<a;u++)if(i=n[u],_.isArrayLike(i))if(t)for(var c=0,s=i.length;c<s;)r[o++]=i[c++];else flatten(i,t,e,r),o=r.length;else e||(r[o++]=i);return r};_.flatten=function(n,t){return flatten(n,t)},_.union=restArguments(function(n){var t=[];if(_.isArrayLike(n))return n=_.filter(n,function(n){return _.isArrayLike(n)}),n=_.flatten(n,!0),_.each(n,function(n){-1===t.indexOf(n)&&t.push(n)}),t}),_.intersection=restArguments(function(n){if(_.isArrayLike(n))return _.contains(n,null)?[]:_.reduce(n,function(t,e){return _.isArrayLike(t)?_.isArrayLike(e)?0===t.length?(_.each(e,function(n){_.contains(t,n)||t.push(n)}),t):_.filter(t,function(n){return _.contains(e,n)}):_.isArrayLike(t)?t:[]:_.isArrayLike(e)?e:[]},[])}),_.difference=restArguments(function(n){if(_.isArrayLike(n))return _.contains(n,null)?[]:_.reduce(n,function(t,e){return _.isArrayLike(t)?_.isArrayLike(e)?0===t.length?(_.each(e,function(n){_.contains(t,n)||t.push(n)}),t):_.filter(t,function(n){return!_.contains(e,n)}):_.isArrayLike(t)?t:[]:_.isArrayLike(e)?e:[]},[])});var unzipFn=function(n){if(!_.isArrayLike(n))return[];for(var t=[],e=_.max(n,function(n){var t=n&&n.length;return _.isNumber(t)?t:0}).length,r=0;r<n.length;r++){var i=n[r];if(_.isArrayLike(i))for(var o=0;o<e;o++)has(t,o)?t[o].push(i[o]):t[o]=[i[o]]}return t},createZipFn=function(n){return n?restArguments(unzipFn):unzipFn};_.zip=createZipFn(!0),_.unzip=createZipFn(!1),_.object=function(n,t){var e,r={};return t||(e=n),_.isArrayLike(n)?(t?(e=_.zip(n,t),_.each(e,function(n){r[n[0]]=n[1]})):_.each(e,function(n){r[n[0]]=n[1]}),r):{}},_.chunk=function(n,t){if(t<=0||null==t)return[];if(_.isArrayLike(n)){var e=[];t="number"==typeof t?Math.ceil(t):1,t=Math.min(t,n.length);for(var r=0;r<n.length&&0<=r;r+=t)e.push(n.slice(r,r+t));return e}};var createFindIndexFn=function(o){return function(n,t,e){if(!_.isArrayLike(n))return-1;t=cb(t,e);for(var r=n.length,i=-1===o?Math.max(r-1,0):0;i<r&&0<=i&&!t(n[i],i,n);i+=o);return i===r?-1:i}};_.findIndex=createFindIndexFn(1),_.findLastIndex=createFindIndexFn(-1);var createIndexFn=function(o,u,a){return function(n,t,e){if(!_.isArrayLike(n))return-1;var r=getLength(n),i=0;if(_.isNumber(e))0<=o?i=0<=e?e:Math.max(r+e,i):r=0<=e?Math.min(e+1,r):e+r+1;else if(a&&e&&r)return n[i=a(n,t)]===t?i:-1;if(t!=t)return 0<=(e=u(slice.call(n,i,r),_.isNaN))?e+i:-1;for(i=0<=o?i:r-1;0<=i&&i<r;i+=o)if(t===n[i])return i;return-1}};_.sortedIndex=function(n,t,e,r){for(var i=(e=cb(e,r))(t),o=0,u=n.length;o<u;){var a=Math.floor((o+u)/2);e(n[a])<i?o=a+1:u=a}return o},_.indexOf=createIndexFn(1,_.findIndex,_.sortedIndex),_.lastIndexOf=createIndexFn(-1,_.findLastIndex),_.range=function(n,t,e){_.isNumber(t)||(t=n||0,n=0),e=e||(t<n?-1:1);for(var r=[],i=n;t<n?t<i&&i<=n:i<t&&n<=i;i+=e)r.push(i);return r},_.bind=restArguments(function(t,e,r){if(!_.isFunction(t))throw new TypeError("must bind to a function");_.isArray(r)||(r=[],e=e&&e[0]);var i=restArguments(function(n){return this instanceof i?t.apply(this,r.concat(n)):t.apply(e,r.concat(n))});return i.prototype=t.prototype,i}),_.bindAll=restArguments(function(t,n){if(!_.isArray(n)||0===n.length)throw new Error("bingAll must need a function");_.each(n,function(n){if(_.isUndefined(t[n]))throw new TypeError("the given key is undefined");if(!_.isFunction(t[n]))throw new TypeError("the given key is not a function");"function"==typeof t[n]&&(t[n]=_.bind(t[n],t))})}),_.partial=restArguments(function(n,t){_.isArray(t)||(t=[],n=n&&n[0]);var e=restArguments(function(e){var r=_.clone(t);return _.each(r,function(n,t){n===_.partial.placeholder&&(0!==e.length?r.splice(t,1,e.shift()):r.splice(t,1,void 0))}),n.apply(this,r.concat(e))});return e.prototype=n.prototype,e}),_.partial.placeholder=_,_.memoize=function(e,r){r=cb(r);var i=restArguments(function(n){var t=r(n.join(""));return has(i.cache,t)?i.cache[t]:i.cache[t]=e.apply(null,n)});return i.cache={},i},_.delay=restArguments(function(n,t,e){return _.isUndefined(e)&&(e=[],t=(t=t&&t[0])||0),setTimeout(function(){return n.apply(null,e)},t)}),_.defer=restArguments(function(n,t){_.isUndefined(t)&&(t=[],n=n&&n[0]),setTimeout(function(){n.apply(null,t)},1)});var createAssigner=function(u,a){return restArguments(function(o,n){return a||(o=Object(o)),null==o||void 0===o||(_.isArray(n)||null==n||(n=[n]),_.each(n,function(n,t,e){var r,i=u(n);for(t=0;i.length,r=i[t];t++)!a&&has(o,r)||(o[r]=n[r])})),o})}
//     var length = arguments.length;
//     if(length < 2 || target == null) return target;
//     var deep = 'boolean' === typeof arguments[1] ? arguments[1] : 'nope';
//     var i = 'nope' === deep ? 1 : 2;
//     deep = 'nope' === deep ? false : deep;
//     for(; i < length; i++) {
//         for(var prop in arguments[i]) {
//             if (has(arguments[i], prop) && (!target[prop] || deep)) {
//                 target[prop] = arguments[i][prop];
//             }
//         }
//     }
//     return target;
_.functions=_.methods=function(n){var t=[];for(var e in n)_.isFunction(n[e])&&t.push(e);return t.sort()},_.isObjectTypeFn=function(t){return function(n){return toString.call(n)==="[object "+t+"]"}}
//     'Number', 'Date', 'Symbol', 
//     'RegExp', 'Error', 'Map', 
//     'WeakMap', 'Set', 'WeakSet'], function (params) {
//     _['isArgs' + params] = _.wrapperByArgsNumber(_.isObjectTypeFn(params), true);
,_.each(["Arguments","Function","String","Number","Date","Symbol","RegExp","Error","Map","WeakMap","Set","WeakSet"],function(n){_["is"+n]=_.isObjectTypeFn(n)}),_.isRealObject=function(n){return"object"==typeof n&&"[object Object]"==toString.call(n)},_.isObject=function(n){return("object"==typeof n||"function"==typeof n)&&null!=n},_.isArray=function(n){return nativeIsArray&&nativeIsArray(n)||"[object Array]"==toString.call(n)},_.isObjectLike=function(n){return"object"==typeof n&&null!==n};var eq=function(n,t,e,r){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return!1;if(n!=n)return t!=t;var i=typeof n;return("function"==i||"object"==i||"object"==typeof t)&&deepEq(n,t,e,r)},SymbolProto=Symbol.prototype,deepEq=function(n,t,e,r){n instanceof _&&(n=n._wrapped),t instanceof _&&(t=t._wrapped);var i=toString.call(n);if(i!==toString.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!=+n?+t!=+t:0==+n?1/+n==1/+t:+n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object Symbol]":return SymbolProto.valueOf.call(n)===SymbolProto.valueOf.call(t)}var o="[object Array]"===i;if(!o){if("object"!=typeof n||"object"!=typeof t)return!1;var u=n.constructor,a=t.constructor;if(u!==a&&!(_.isFunction(u)&&u instanceof u&&_.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[];for(var c=(e=e||[]).length;c--;)if(e[c]===n)return r[c]===t;if(e.push(n),r.push(t),o){if((c=n.length)!==t.length)return!1;for(;c--;)if(!eq(n[c],t[c],e,r))return!1}else{var s,l=_.keys(n);if((c=l.length)!==_.keys(t).length)return!1;for(;c--;)if(s=l[c],!has(t,s)||!eq(n[s],t[s],e,r))return!1}return e.pop(),r.pop(),!0};_.isDeepEqual=_.isEqual=function(n,t){
//     return obj == other || (function(obj, other) {
//         var checkedObj = [];
//         var objKeys = _.allKeys(obj);
//         var otherKeys = _.allKeys(other);
//         if(objKeys.length !== otherKeys.length) return false;
//         for(var i = 0, o, ot; i < objKeys.length; i++) {
//             o = obj[objKeys[i]];
//             ot = other[otherKeys[i]];
//             if(checkedObj.indexOf(o) !== -1 && checkedObj.indexOf(o) !== -1 && o != ot) {
//                 checkedObj = null;
//                 return false;
//             } 
//             if(_.isObjectLike(o, ot) && (checkedObj.push(o, ot), !_.isDeepEqual(o, ot))) {
//                 checkedObj = null;                        
//                 return false;
//             } else {
//                 checkedObj = null;
//                 if(!_.isObjectLike(o) && !_.isObjectLike(ot) && ot !== o) {
//                     checkedObj = null;
//                     return false
//                 } else {
//                     checkedObj = null;
//                     return false;
//                 }
//             }
//         }
//         return true;
//     })(obj, other)        
//     return obj === other;
return n===t&&0!==n||eq(n,t)};var has=function(n,t){if(null==n)return!1;if(_.isArrayLike(t)){for(var e=t.length,r=0;r<e;r++)if(!hasOwnProperty.call(n,t[r])||null==(n=n[t[r]]))return!1;return!0}return hasOwnProperty.call(n,t)};_.has=has,_.isEmpty=function(n){if(null==n)return!0;if(_.isArrayLike(n)){for(var t in n)if(has(n,t)&&"length"!==t)return!1;return 0===n.length}if(_.isObject(n)){for(var t in n)if(has(n,t))return!1;return!0}return _.isString(n)?0===n.length:_.isRegExp(n)?"(?:)"===n.source:void 0},_.isElement=function(n){return"object"==typeof HTMLElement?n instanceof HTMLElement:_.isObjectLike(n)&&1===n.nodeType&&"string"==typeof n.nodeName},_.isNaN=function(n){return isNaN?_.isNumber(n)&&isNaN(n):n!=n},_.isFinite=function(n){return!_.isSymbol(n)&&isFinite(n)&&!isNaN(parseFloat(n))},_.isBoolean=function(n){return"boolean"==typeof n||_.isObjectTypeFn("Boolean")(n)},_.isNull=function(n){return null===n},_.isUndefined=function(n){return void 0===n},_.keys=_.objects=function(n){if(null==n||_.isString(n))return[];var t=Object.keys;if(t)return t(n);var e=[];for(var r in n)has(n,r)&&e.push(r);return e},_.allKeys=_.allObjects=function(n){if(null==n||_.isString(n))return[];var t=[];for(var e in n)t.push(e);return t},_.extend=createAssigner(_.allKeys,!0),_.extendOwn=_.assign=createAssigner(_.keys,!0),_.pick=restArguments(function(r,n){var i,t=_.keys(r),o=Object.create(null);return null==r||("function"==typeof(n&&n[0])?(i=cb(n[0],n[1]),_.each(t,function(n,t,e){i(r[n],n,r)&&(o[n]=r[n])})):(n=_.flatten(n),_.each(n,function(n,t,e){!has(r,n)&&null==r[n]||(o[n]=r[n])}))),o}),_.omit=restArguments(function(r,n){var i,t=_.keys(r),o=Object.create(null);if(null==r)return o;var e=_.isArrayLike(r);if("function"==typeof(n&&n[0]))i=cb(n[0],n[1]),_.each(t,function(n,t,e){i(r[n],n,r)||(o[n]=r[n])});else if(n=_.flatten(n),e)for(var u in r)_.contains(n,Number(u))||(o[u]=r[u]);else for(var u in r)_.contains(n,u)||(o[u]=r[u]);
//     if(!_.contains(keys, key)) {
//         result[key] = obj[key];
//     }
return o}),_.defaults=createAssigner(_.keys,!1),_.clone=function(n){return _.isRealObject(n)?_.extend({},n):_.isArray(n)?n.slice():n},_.tap=function(n,t){return t=cb(t),(_.isObject(n)||_.isArrayLike(n)||null!=n)&&t(n),n},_.values=function(t){var n=_.keys(t);return 0===n.length?[]:_.map(n,function(n){return t[n]})},_.mapObject=function(r,i,n){i=cb(i,n);var o=Object.create(null),t=_.keys(r);return _.each(t,function(n,t,e){o[n]=i(r[n],n,r)}),o},_.pairs=function(e){var r=[],n=_.keys(e);return 0===n.length||_.each(n,function(n,t){r.push([n,e[n]])}),r},_.invert=function(e){var r=Object.create(null),n=_.keys(e);return 0===n.length||_.each(n,function(n,t){r[e[n]]=n}),r},_.create=function(n,e){if(!_.isObject(n)&&!_.isArrayLike(n))return Object.create(null);var r=Object.create(n||null),t=_.keys(e);return 0===t.length||_.each(t,function(n,t){r[n]=e[n]}),r},_.find=_.detect=function(n,t,e){var r,i;if(t=cb(t,e),_.isArray(n)){for(i=n.length,r=0;r<i;r++)if(t(n[r],r,n))return n[r]}else{var o=_.keys(n);for(i=o.length,r=0;r<i;r++)if(t(n[o[r]],o[r],n))return n[o[r]]}},_.filter=_.select=function(n,t,e){var r,i,o;if(t=cb(t,e),_.isArrayLike(n))for(r=[],o=n.length,i=0;i<o;i++)t(n[i],i,n)&&r.push(n[i]);else{r=[];var u=_.keys(n);for(o=u.length,i=0;i<o;i++)t(n[u[i]],u[i],n)&&r.push(n[u[i]])}return null==r?[]:r};var isObjHasProperties=function(n,t,e){for(var r,i=0;i<e.length;i++)if(r=e[i],!has(n,r)||n[r]!==t[r])return!1;return!0};_.findWhere=function(n,t){var e,r=_.keys(t);if(_.isArray(n)){for(e=0;e<n.length;e++)if(isObjHasProperties(n[e],t,r))return n[e]}else if(isObjHasProperties(n,t,r))return n},_.where=function(n,t){var e,r=_.keys(t),i=[];if(_.isArray(n))for(e=0;e<n.length;e++)isObjHasProperties(n[e],t,r)&&i.push(n[e]);else if(isObjHasProperties(n,t,r))return[n];return i},_.reject=function(n,t,e){var r,i,o;if(t=cb(t,e),_.isArray(n))for(r=[],o=n.length,i=0;i<o;i++)t(n[i],i,n)||r.push(n[i]);else{r={};var u=_.keys(n);for(o=u.length,i=0;i<o;i++)t(n[u[i]],u[i],n)||(r[u[i]]=n[u[i]])}return null==r?[]:r},_.contains=_.includes=_.include=function(n,t,e,r){var i;return null!=n&&("number"==typeof e&&!r||(e=0),!!(_.isArrayLike(n)&&(e=0<=e?Math.min(e,Math.max(n.length-1,0)):Math.max(n.length+e,0))<=_.indexOf(n,t,e))||!!(_.isRealObject(n)&&(i=_.values(n),(e=0<=e?Math.min(e,Math.max(i.length-1,0)):Math.max(n.length+e,0))<=_.indexOf(i,t,e))))},_.without=restArguments(function(n,t){return null==t&&(t=[t]),_.filter(n,function(n){return!_.contains(t,n)})}),_.uniq=_.unique=function(n,t,e,r){if(!_.isArrayLike(n))return[];_.isBoolean(t)||(r=e,e=t,t=!1),null!=e&&(e=cb(e,r));for(var i=[],o=[],u=0;u<n.length;u++){var a=n[u],c=e?e(a,u,n):a;t&&!e?(u&&i===c||o.push(a),i=c):e?_.contains(i,c)||(o.push(a),i.push(c)):_.contains(o,a)||o.push(a)}return o},_.invoke=restArguments(function(n,r,i){var o,u,a=_.isArray(n)?[]:{};return _.isArray(i)||(r=r[0]),_.each(n,function(n,t,e){if("function"==typeof r)a[t]=r.apply(n,i);else if(_.isArray(r)){if("function"==typeof(o=_.deepGet(r)(n)))u=_.deepGet(r.slice(0,-1))(n)||n,a[t]=o.apply(u,i);else if(null==o)return a.push(o)}else if("function"==typeof n[r]?a[t]=n[r].apply(n,i):null==n[r]&&(a[t]=n[r]),"function"!=typeof n[r]&&null!=n[r])throw new TypeError("non-functions")}),a}),_.pluck=function(n,r){var i=[];return _.isArray(n)&&_.each(n,function(n,t,e){_.isObject(n)&&(r in n?i.push(n[r]):i.push(void 0))}),i},_.max=function(n,r,t){var i,o,u=-1/0;return _.isEmpty(n)?u:(r=_.isUndefined(r)?cb():t&&t[r]==n?cb():cb(r,t),_.each(n,function(n,t,e){o=r(n,t,e),o=_.isString(o)?Number(r(n,t,e)):o,null==i&&(!_.isNaN(o)&&_.isNumber(o)||_.isDate(o))&&(i=n),u<o&&(!_.isNaN(o)&&_.isNumber(o)||_.isDate(o))&&(u=o,i=n)}),i||u)},_.min=function(n,r,t){var i,o,u=1/0;return _.isEmpty(n)?u:(r=_.isUndefined(r)?cb():t&&t[r]==n?cb():cb(r,t),_.each(n,function(n,t,e){o=r(n,t,e),o=_.isString(o)?Number(r(n,t,e)):o,null==i&&(!_.isNaN(o)&&_.isNumber(o)||_.isDate(o))&&(i=n),o<u&&(!_.isNaN(o)&&_.isNumber(o)||_.isDate(o))&&(u=o,i=n)}),i||u)},_.sortBy=function(n,r,t){var i=0;return r=cb(r,t),_.pluck(_.map(n,function(n,t,e){return{value:n,index:i++,criteria:r(n,t,e)}}).sort(function(n,t){var e=n.criteria,r=t.criteria;if(e!==r){if(r<e||null==e)return 1;if(e<r||null==r)return-1}return n.index-t.index}),"value")};var group=function(u){return function(n,r,t){var i,o={};return r=cb(r,t),_.each(n,function(n,t,e){i=r(n,t,e),u(i,o,n)}),o}};_.groupBy=group(function(n,t,e){has(t,String(n))?t[n].push(e):t[n]=[e]}),_.indexBy=group(function(n,t,e){t[n]=e}),_.countBy=group(function(n,t,e){has(t,String(n))?t[n]++:t[n]=1}),_.sample=function(n,t,e){if(null==t||e)return _.isArrayLike(n)&&!_.isObject(n)||(n=_.values(n)),n[_.random(n.length)];n=!_.isArrayLike(n)||_.isObject(n)?_.values(n):_.clone(n);var r,i,o=_.isArray(n)?n.length:_.values(n).length;if(o<=1)return n;t=Math.max(Math.min(t,o),0);for(var u=0;u<o;u++)r=_.random(u,o-1),i=n[u],n[u]=n[r],n[r]=i;return slice.call(n,0,t)},_.shuffle=function(n){return _.sample(n,1/0)},_.findKey=function(n,t,e){t=cb(t,e);var r=_.keys(n);if(0!==r.length)for(var i=0;i<r.length;i++)if(t(n[r[i]],r[i],n))return r[i]};var reStrSymbol=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;_.toArray=function(n){return _.isObject(n)?_.values(n):_.isArray(n)?_.clone(n):_.isString(n)?n.match(reStrSymbol)||[]:_.isArrayLike(n)?slice.call(n,0):[n]},_.size=function(n){return _.isString(n)?getLength(n)||0:_.isObject(n)&&!_.isArrayLike(n)?_.values(n).length:_.isArrayLike(n)?n.length:0},_.partition=function(r,i,n){var o,t;return i=cb(i,n),_.isRealObject(r)?(o=[[],[]],t=_.keys(r),_.each(t,function(n,t,e){i(r[n],n,r)?o[0].push(r[n]):o[1].push(r[n])}),o):_.isArrayLike(r)?(o=[[],[]],r=_.clone(r),_.each(r,function(n,t,e){i(n,t,e)?o[0].push(n):o[1].push(n)}),o):[[],[]]},_.compact=function(n){return _.partition(n,_.negate(Boolean))[1]},_.first=_.head=_.take=function(n,t,e){return!_.isArrayLike(n)||n.length<1?_.isNumber(t)?[]:void 0:!_.isNumber(t)||e?n[0]:_.initial(n,n.length-t)},_.initial=function(n,t,e){return!_.isArrayLike(n)||n.length<1?[]:slice.call(n,0,Math.max(0,Math.min(n.length-(!_.isNumber(t)||e?1:t),n.length)))},_.last=function(n,t,e){return!_.isArrayLike(n)||n.length<1?_.isNumber(t)?[]:void 0:!_.isNumber(t)||e?n[n.length-1]:_.rest(n,n.length-t)},_.rest=_.drop=_.tail=function(n,t,e){return!_.isArrayLike(n)||n.length<1?[]:slice.call(n,Math.max(!_.isNumber(t)||e?1:t,0),n.length)},_.debounce=function(e,r,i){var o,u,a=null;i=i||!1;function n(){a&&clearTimeout(a);var n=this,t=arguments;return!1!==i?(o=!a,a=setTimeout(function(){a=null},r),o&&(u=e.apply(n,t))):a=setTimeout(function(){a=null,u=e.apply(n,t)},r),u}return n.reset=function(n){!1},n.cancel=function(){clearTimeout(a),a=null},n},_.throttle=function(e,r,i){function n(){var n=_.now();s||!1!==i.leading||(s=n);var t=r-(n-s);return u=this,a=arguments,t<=0||r<t?(o&&(clearTimeout(o),o=null),s=n,c=e.apply(u,a),o||(u=a=null)):o||!1===i.trailing||(o=setTimeout(function(){s=!(o=null)===i.leading?0:_.now(),c=e.apply(u,a),o||(u=a=null)},t)),c}var o,u,a,c,s=0;i=i||{leading:!0,trailing:!0};return n.cancel=function(){clearTimeout(o),s=0,o=u=a=null},n.reset=function(n){s=0},n},_.timeChunk=function(n,t,e,r,i){if(_.isArray(n)||_.isObject(n)){e=Math.max(1,e||8),i=i||200,t=cb(t,r);var o=0,u=_.isArray(n)?n.length:_.keys(n).length;n=_.clone(n),list=_.isArray(n)?n:_.keys(n);var a,c,s,l=Math.max(1,e);return c=_.isArray(n)?function(){for(;o<l&&o<u;o++)t(list[o],o,list);o=l,l=Math.min(u,l+e)}:function(){for(;o<l&&o<u;o++)t(n[list[o]],list[o],n);o=l,l=Math.min(u,l+e)},(s=function(){log(o,l,u),c(),a=setTimeout(function(){s(),u===o&&(clearTimeout(a),a=null)},i)}).reset=function(n){_.isNaN(Number(n))||(e=Number(n)||e),l=Math.max(1,e)},s}},_.once=function(t){var e,r=0;return function(){var n=arguments;return r++,t&&r<=1&&(e=t.apply(this,n),t=null),e}},_.after=function(t,e){var r,i=0;return _.isNumber(t)?(t=t||1,function(){var n=arguments;return++i===t&&e&&(r=e.apply(this,n),e=null),r}):noop},_.before=function(t,e){var r,i=0;return _.isNumber(t)?(t=t||1,function(){var n=arguments;return++i<t&&e?r=e.apply(this,n):e=null,r}):noop},_.wrap=function(t,e){return _.isArgsFunction(t,e)?restArguments(function(n){return n.unshift(t),e.apply(this,n)}):noop},_.negateArgsType=function(e){return _.wrapperByArgsNumber(function(t){if(_.isFunction(e))try{return void 0!==t&&t.constructor===e}catch(n){return null==t}try{e=e.prototype.constructor}catch(n){e=void 0}return void 0!==e?t.prototype.constructor===e:t==e},!0)},_.negateType=function(e){return function(t){if(_.isFunction(e))try{return void 0!==t&&t.constructor===e}catch(n){return null==t}try{e=e.prototype.constructor}catch(n){e=void 0}return void 0!==e?t.prototype.constructor===e:t==e}},_.negate=function(n){return function(){return!n.apply(this,arguments)}},_.restArguments=restArguments,_.compose=_.restArguments(function(r){return _.restArguments(function(n){var t;0<=(e=r.length-1)&&(t=r[e].apply(this,n));for(var e=r.length-2;0<=e;e--)t=r[e].call(this,t);return t})}),_.noConflict=function(){return root._=defaultLikeUnderscoreUtil,this},_.constant=function(n){var t=n;return function(){return t}},_.times=function(n,t,e){var r=[];t=cb(t,e);for(var i=0;i<n;i++)r.push(t(i));return r},_.random=function(n,t){return void 0===t&&(t=n||0,n=0),Math.floor(Math.random()*Math.floor(t-n))};var uniqueIdNum=0;_.uniqueId=function(n){return(n||"")+uniqueIdNum++};var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unescapeMap=_.invert(escapeMap),createEscapeFn=function(t){function e(n){return t[n]}var n="(?:"+_.keys(t).join("|")+")",r=new RegExp(n),i=new RegExp(n,"g");return function(n){return n=n?""+n:"",r.test(n)?n.replace(i,e):n}};_.escape=createEscapeFn(escapeMap),_.unescape=createEscapeFn(unescapeMap),_.result=function(n,t,e){if(null==n)return"function"==typeof e?e():e;var r,i,o,u;if(_.isArrayLike(t)){for(o=t.length,r=n&&n[t[0]],u=n&&n[t[0]],i=1;i<o;i++)r="function"==typeof r?r()&&r()[t[i]]:r&&r[t[i]],i!==o-1&&(u="function"==typeof u?u.apply(n)&&u.apply(n)[t[i]]:u&&u[t[i]]);u="function"==typeof u?u.apply(n):u}else r=n&&n[t],u=n;return void 0!==r?"function"==typeof r?r.call(u):r:"function"==typeof e?e.call(u||n):e},_.now=Date.now||function(){return(new Date).getTime()},_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=/(.)^/,escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},escapesRexExp=new RegExp(/\\|'|\r|\n|\u2028|\u2029/,"g"),replaceEscapes=function(n){return"\\"+escapes[n]};_.template=function(o,n,t){!n&&t&&(n=t),n=_.defaults({},n,_.templateSettings);var e,u="__source+='",a=0,r=new RegExp([(n.escape||noMatch).source,(n.interpolate||noMatch).source,(n.evaluate||noMatch).source,"$"].join("|"),"g");o.replace(r,function(n,t,e,r,i){return u+=o.slice(a,i).replace(escapesRexExp,replaceEscapes),a=i+n.length,
//     source += "';\n" + evaluate + "\n__source+='";
//     log('evaluate', source)
//     source += "'+\n((__text=(" + interpolate + "))==null?'':__text)+\n'";
//     log('interpolate', source)
//     // why not directly use _.escape in the function ?
//     // because it will be a calculator text to escape
//     // source += "'" + escape ? _.escape(escape) : '' + "'" 
//     source += "'+\n((__text=(" + escape + "))==null?'':_.escape(__text))+\n";
//     log('escape', source)
t?u+="'+\n((__text=("+t+"))==null?'':_.escape(__text))+\n'":e?u+="'+\n((__text=("+e+"))==null?'':__text)+\n'":r&&(u+="';\n"+r+"\n__source+='"),n}),u+="';\n",n.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __text, __source='',__j=Array.prototype.join,"+"print=function(){__source+=__j.call(arguments, '');};\n"+u+"return __source;\n";try{e=new Function(n.variable||"obj","_",u)}catch(n){throw n.source=u,n}function i(n){return e.call(this,n,_)}var c=n.variable||"obj";return i.source="function("+c+") {\n"+u+"}",i},_.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n,t,e){_.prototype[n]=function(){return ArrayProto[n].apply(this._wrapped,arguments),"shift"!==n&&"shift"!==n||0!==this._wrapped.length||delete this._wrapped[0],chainsFunc(this,this._wrapped)}}),_.each(["concat","join","slice"],function(n,t,e){_.prototype[n]=function(){return chainsFunc(this,ArrayProto[n].apply(this._wrapped,arguments))}}),_.onceLog=restArguments(function(n){logOnce||(_.each(n,function(n,t,e){console.log("onceLog: 第"+(t+1)+"个参数: ",n)}),logOnce=!0,setTimeout(function(){logOnce=!1},0))}),_.eqLog=function(n,t,e){if(n&&Array.isArray(n)&&(0===n.length||n.length%2==1))throw new Error("eqLog function arguments must be an array and first one length must be double");for(var r=0;r<n.length;r+=2)if(n[r]!==n[r+1])return null;_.each(t,function(n,t,e){console.log("eqLog: 第"+(t+1)+"个参数: ",n)}),e&&_.each(e,function(n){"function"==typeof n&&n()})},_.countLog=function(){return restArguments(function(n){})};var isPropAndIsObject=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)&&"object"==typeof n[t]&&"[object Object]"===Object.prototype.toString.call(n[t])||!1},__isProxy=Symbol();_.proxy=function(n,i,o,u,a){var e=new WeakSet;for(var t in o=cb(o,u),_.isArray(a)||(a=_.isUndefined(a)?[]:[a]),_.isArray(i)||(i=_.isString(i)?_.map(i.split(" "),function(n){return new RegExp(n)}):[""]),Object.prototype.hasOwnProperty.call(n,__isProxy)||(n[__isProxy]=!0),n)if(isPropAndIsObject(n,t)){if(Object.prototype.hasOwnProperty.call(n[t],__isProxy)&&n[t][__isProxy])continue;n[t]=_.proxy(n[t]).proxy}var r=Proxy.revocable(n,{get:function(n,t,e){
//     elseLog({ target: target, property: property, receiver: receiver, mode: 'get' })
return _.some(i,function(n){if(!_.isRegExp(n)&&_.isString(n)&&(n=new RegExp(n)),_.isRegExp(n))return n.test(t.toString())})&&(a.unshift(n,t,value,e),o.apply(u,a)),Reflect.get(n,t)},set:function(n,t,e,r){_.some(i,function(n){if(!_.isRegExp(n)&&_.isString(n)&&(n=new RegExp(n)),_.isRegExp(n))return n.test(t.toString())})&&(a.unshift(n,t,e,r),o.apply(u,a)),Reflect.set(n,t,e,r)}});return e.add(r.revoke.bind(r)),{proxy:r.proxy,revoke:function(){var t=this;_.each(e,function(n){n.apply(t)})}}};var buildTree=_.buildTree=function(n,t,e,r){var i=(r=r||{}).children,o=r.parent,u=r.model,a={},c={};if(i=i||"children",o=o||"parent",_.isObject(n)||_.isArray(n)){for(var s in t=cb(t,e),n)has(n,s)&&(a[n[s].name]=n[s]);for(var l in a)has(a,l)&&(a[l][o]&&0<a[l][o].length?_.each(a[l][o],function(n){a[n]&&!a[n][i]&&(a[n][i]={}),a[n]&&!a[n][o]?a[n]&&n!==a[l].name&&(a[n][i][a[l].name]=t(a[l])):a[n]&&n!==a[l].name&&a[n][o]&&-1==a[n][o].indexOf(a[l].name)&&(a[n][i][a[l].name]=t(a[l]))}):c[a[l].name]=a[l]);if(_.isObject(u))for(var f in has(u,utilFunctions)&&_.isArray(u.utilFunctions)||(u.utilFunctions=[]),has(u,relationClasses)&&_.isArray(u.relationClasses)||(u.relationClasses=[]),c)has(c,f)&&(null==c[f][i]||c[f][i]&&0==c[f][i].length?u.utilFunctions.push(c[f]):u.relationClasses.push(c[f]));return c}},originalPropArr=[],FunctionPrototypeCall=Function.prototype.call.bind(),FunctionPrototypeApply=Function.prototype.apply.bind();_.beforeDetectEnv=function(env,isDetectFnsRelation){for(var _prop in env=env||root,isDetectFnsRelation&&(Function.prototype.call=function(context){var context=context||window;context.__fn=this,context!=window&&(this.__children=this.__children||[],""!==toString.call(context.__proto__.constructor.name)&&-1==this.__children.indexOf(toString.call(context.__proto__.constructor.name))&&toString.call(context.__proto__.constructor.name)!=this.name&&this.__children.push(toString.call(context.__proto__.constructor.name)),context.__proto__.constructor.__parents=context.__proto__.constructor.__parents||[],""!==toString.call(this.name)&&-1==context.__proto__.constructor.__parents.indexOf(toString.call(this.name))&&context.__proto__.constructor.name!=toString.call(this.name)&&context.__proto__.constructor.__parents.push(toString.call(this.name)));for(var args=[],i=1,len=arguments.length;i<len;i++)args.push("arguments["+i+"]");var result=eval("context.__fn("+args+")");return delete context.__fn,result},Function.prototype.apply=function(context,arr){var context=context||window,result;if(context.__fn=this,context!=window&&(this.__children=this.__children||[],""!==toString.call(context.__proto__.constructor.name)&&-1==this.__children.indexOf(toString.call(context.__proto__.constructor.name))&&toString.call(context.__proto__.constructor.name)!=this.name&&this.__children.push(toString.call(context.__proto__.constructor.name)),context.__proto__.constructor.__parents=context.__proto__.constructor.__parents||[],""!==toString.call(this.name)&&-1!=context.__proto__.constructor.__parents.indexOf(toString.call(this.name))&&context.__proto__.constructor.name!=toString.call(this.name)&&context.__proto__.constructor.__parents.push(toString.call(this.name))),arr){for(var args=[],i=0,len=arr.length;i<len;i++)args.push("arr["+i+"]");result=eval("context.__fn("+args+")")}else result=context.__fn();return result}),env)has(env,_prop)&&-1===originalPropArr.indexOf(_prop)&&originalPropArr.push(toString.call(_prop))},_.detectEnv=function(t,n){t=t||root;var e,r={classes:[],utilFunctions:[],relationClasses:[],props:{vals:[],objs:[],strs:[],nums:[],arrs:[],bools:[],nullAndUndefineds:[]}};for(var i in originalPropArr.push("_typesForModel","model"),t)if(e=toString.call(i),Object.prototype.hasOwnProperty.call(t,i)&&-1===originalPropArr.indexOf(e)){if(null===t[i]||void 0===t[i]){r["props"]["nullAndUndefineds"].push(e);continue}switch(typeof t[i]){case"function":r["classes"].push(e);break;case"boolean":r["props"]["bools"].push(e);break;case"string":r["props"]["strs"].push(e);break;case"number":r["props"]["nums"].push(e);break;case"object":Array.isArray(t[i])?r["props"]["arrs"].push(e):r["props"]["objs"].push(e);break;default:r["props"]["vals"].push(e)}}return r.retClasses=_.map(r.classes,function(n){return{name:n,parent:t[n].__parents}}),r.rets=buildTree(r.retClasses),n&&(Function.prototype.call=FunctionPrototypeCall,Function.prototype.apply=FunctionPrototypeApply),r},_.each(_.functions(_),function(n,t,e){!/^is/.test(n)||"isEqual"===n&&"isDeepEqual"===n||(_["isArgs"+n.slice(2)]=wrapperByArgsNumber(_[n],!0))}),_.mixin(_)}();